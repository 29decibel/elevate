<mat-sidenav-container>
	<mat-sidenav #sidenav
				 [mode]="sideNavMode"
				 [opened]="sideNavOpened"
				 (open)="onSideNavOpened()"
				 (close)="onSideNavClosed()">
		<mat-nav-list>
			<mat-list-item *ngFor="let item of mainMenuItems" routerLink="/{{item.routerLink}}"
						   routerLinkActive="{{item.routerLinkActive}}">
				<button mat-icon-button>
					<mat-icon>{{item.icon}}</mat-icon>
					&nbsp;&nbsp;&nbsp;&nbsp;
					{{item.name}}
				</button>
			</mat-list-item>
		</mat-nav-list>
	</mat-sidenav>
	<mat-toolbar>

		<button mat-icon-button id="toolBarMenu" (click)="sidenav.toggle()">
			<mat-icon>menu</mat-icon>
		</button>

		<span>{{title}}</span>

		<span class="toolbar-spacer"></span>

		<ng-container *ngIf="isSynced">
			<button mat-button [matMenuTriggerFor]="syncMenu">
				<mat-icon>history</mat-icon>
				{{syncedStateMessage}}
			</button>
			<mat-menu #syncMenu="matMenu">
				<button mat-menu-item (click)="onSync(false)">
					<mat-icon>sync</mat-icon>
					Sync now
				</button>
				<button mat-menu-item (click)="onSync(true)">
					<mat-icon>redo</mat-icon>
					Redo Full Sync
				</button>
				<!--<button mat-menu-item>
					<mat-icon>clear</mat-icon>
					Clear Local History
				</button>
				<button mat-menu-item>
					<mat-icon>file_download</mat-icon>
					Backup History
				</button>
				<button mat-menu-item>
					<mat-icon>file_upload</mat-icon>
					Restore History
				</button>-->
			</mat-menu>
		</ng-container>

		<ng-container *ngIf="!isSynced">
			<button mat-button (click)="onSync(false)">
				<mat-icon>history</mat-icon>
				History not synced
			</button>
		</ng-container>

		<button mat-icon-button [matMenuTriggerFor]="moreMenu">
			<mat-icon>more_vert</mat-icon>
		</button>

		<mat-menu #moreMenu="matMenu">

			<button mat-menu-item routerLink="/releasesNotes" routerLinkActive="true">
				<mat-icon>system_update</mat-icon>
				Release notes
			</button>

			<button mat-menu-item
					(click)="onOpenLink('https://github.com/thomaschampagne/stravistix/wiki/Frequently-Asked-Questions')">
				<mat-icon>help</mat-icon>
				FAQ
			</button>

			<!--TODO use github ISSUE_TEMPLATE.md @see https://github.com/blog/2111-issue-and-pull-request-templates-->
			<button mat-menu-item (click)="onOpenLink('https://github.com/thomaschampagne/stravistix/issues/new')">
				<mat-icon>bug_report</mat-icon>
				Report a bug
			</button>

			<button mat-menu-item (click)="onOpenLink('http://thomaschampagne.github.io/stravistix/')">
				<mat-icon>public</mat-icon>
				Plugin page
			</button>

			<button mat-menu-item (click)="onOpenLink('https://www.strava.com/clubs/stravistix')">
				<mat-icon>group</mat-icon>
				Strava Club
			</button>

			<button mat-menu-item (click)="onShowShare()">
				<mat-icon>share</mat-icon>
				Share plugin
			</button>

			<button mat-menu-item (click)="onShowAbout()">
				<mat-icon>info</mat-icon>
				About
			</button>

		</mat-menu>

	</mat-toolbar>
	<div>
		<router-outlet></router-outlet>
	</div>
</mat-sidenav-container>
