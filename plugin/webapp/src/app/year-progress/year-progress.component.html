<mat-card>
	<mat-card-content>

		<mat-form-field>
			<mat-select placeholder="Activity Types"
						(change)="onSelectedActivityTypesChange()"
						[(ngModel)]="selectedActivityTypes"
						multiple>
				<mat-option *ngFor="let type of availableActivityTypes" [value]="type">{{type}}</mat-option>
			</mat-select>
		</mat-form-field>

		<mat-form-field>
			<mat-select placeholder="Progress Type"
						(change)="onSelectedProgressTypeChange()"
						[(ngModel)]="selectedProgressType">
				<mat-option *ngFor="let progressType of progressTypes" [value]="progressType">
					{{progressType.label}} {{(progressType.unit) ? "(" + progressType.unit + ")" : ""}}
				</mat-option>
			</mat-select>
		</mat-form-field>

		<mat-form-field>
			<mat-select placeholder="Years"
						[(ngModel)]="selectedYears"
						(change)="onSelectedYearsChange()"
						multiple>
				<mat-option *ngFor="let year of availableYears" [value]="year">{{year}}</mat-option>
			</mat-select>
		</mat-form-field>

		<mat-slide-toggle
			[(ngModel)]="includeCommuteRide"
			(change)="onIncludeCommuteRideToggle()">
			Commute rides
		</mat-slide-toggle>

		<div *ngIf="(selectedActivityTypes.length === 0)">

			No progression to display. Please select at list 1 type.

		</div>

		<!-- Graph and Legend -->
		<div [hidden]="(selectedActivityTypes.length === 0)">

			<div fxLayout="row" fxLayoutAlign="space-between start">

				<div fxFlex="60" id="yearProgressGraph">
				</div>
				<div fxFlex="20">
					{{dateWatched | date: 'MMM d'}}
					<div *ngFor="let progressAtDay of progressionsAtDay | orderBy: '-year'">
						<span [style.color]="progressAtDay.color">{{progressAtDay.year}}: {{progressAtDay.value.toLocaleString()}}</span>
					</div>
				</div>
				<div>
					<!--<pre style="font-size: 9px;">{{progressionsAtDay | json}}</pre>-->
				</div>

			</div>
		</div>


	</mat-card-content>
</mat-card>

<br/><br/>
selectedActivityTypes: {{selectedActivityTypes | json}}
<br/><br/>
availableActivityTypes: {{availableActivityTypes | json}}
<br/><br/>
progressTypes: {{progressTypes | json}}
